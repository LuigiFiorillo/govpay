openapi: 3.0.0
info:
  version: "1.0.0"
  title: GovPay - API Pagamento
  contact:
    name: GitHub Project Page
    url: 'https://github.com/link-it/GovPay/'
  license:
    name: GPL
    url: 'https://github.com/link-it/GovPay/blob/master/LICENSE'
servers:
  - description: SwaggerHub API Auto Mocking
    url: ${api-base-url}
tags:
  - name: Pagamenti
    description: Realizzazione e consultazione dei pagamenti delle pendenze
  - name: Pendenze
    description: Consultazione delle posizioni debitorie
  - name: Domini
    description: Anagrafica degli Enti Creditori    
paths:
  '/domini':
    get:
      tags:
        - Domini
      summary: Elenco dei domini beneficiari censiti
      parameters:
        - $ref: './comuni.yaml#/pagina'
        - $ref: './comuni.yaml#/risultatiPerPagina'
        - $ref: './comuni.yaml#/campi'
        - $ref: './comuni.yaml#/abilitato'
        - name: ordinamento
          in: query
          description: >-
            csv dei campi su cui ordinare i risultati, preceduti da + o - per ascendente o discendente (default ascendente)
             * ragioneSociale
          required: false
          schema:
            type: string
            format: csv
            default: +ragioneSociale
        - name: idStazione
          in: query
          description: Restrizione ai soli domini associati alla stazione indicata
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Lista paginata dei domini ricercati
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './comuni.yaml#/listaPaginata'
                  - type: object
                    required:
                      - risultati
                    properties:
                      risultati:
                        type: array
                        items:
                          $ref: './dominio.yaml#/dominioIndex' 
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403'
        '500':
          $ref: './errori.yaml#/responses/500'
  '/domini/{idDominio}':
    get:
      tags:
        - Domini
      summary: Lettura dei dati di un dominio beneficiario
      parameters:
        - in: path
          name: idDominio
          schema:
            type: string
          description: Codice fiscale del beneficiario
          required: true
      responses:
        '200':
          description: Dettaglio del dominio
          content:
            application/json:
              schema:
                $ref: './dominio.yaml#/dominio'
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403'
        '404':
          $ref: './errori.yaml#/responses/404'          
        '500':
          $ref: './errori.yaml#/responses/500'
  '/domini/{idDominio}/unitaOperative':
    get:
      tags:
        - Domini
      summary: Elenco delle unità operative del beneficiario
      parameters:
        - $ref: './comuni.yaml#/pagina'
        - $ref: './comuni.yaml#/risultatiPerPagina'
        - $ref: './comuni.yaml#/campi'
        - $ref: './comuni.yaml#/abilitato'
        - name: ordinamento
          in: query
          description: >-
            csv dei campi su cui ordinare i risultati, preceduti da + o - per ascendente o discendente (default ascendente)
             * ragioneSociale
          required: false
          schema:
            type: string
            format: csv
            default: +ragioneSociale        
        - name: idDominio
          in: path
          description: Identificativo del dominio
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Lista paginata dei domini ricercati
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './comuni.yaml#/listaPaginata'
                  - type: object
                    required:
                      - risultati
                    properties:
                      risultati:
                        type: array
                        items:
                          $ref: './dominio.yaml#/unitaOperativa'
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403' 
        '500':
          $ref: './errori.yaml#/responses/500'
  '/domini/{idDominio}/unitaOperative/{idUnitaOperativa}':
    get:
      tags:
        - Domini
      summary: Lettura dei dati di una unità operativa
      parameters:
        - in: path
          name: idDominio
          schema:
            type: string
          description: Codice fiscale del beneficiario
          required: true
        - name: idUnitaOperativa
          in: path
          description: Identificativo dell'unità operativa
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Dettaglio dell'unità operativa
          content:
            application/json:
              schema:
                $ref: './dominio.yaml#/unitaOperativa'
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403' 
        '500':
          $ref: './errori.yaml#/responses/500'
  '/domini/{idDominio}/ibanAccredito':
    get:
      tags:
        - Domini
      summary: Elenco degli iban di accredito del beneficiario
      parameters:
        - $ref: './comuni.yaml#/pagina'
        - $ref: './comuni.yaml#/risultatiPerPagina'
        - $ref: './comuni.yaml#/campi'
        - $ref: './comuni.yaml#/abilitato'      
        - name: ordinamento
          in: query
          description: >-
            csv dei campi su cui ordinare i risultati, preceduti da + o - per ascendente o discendente (default ascendente)
             * ragioneSociale
          required: false
          schema:
            type: string
            format: csv
            default: +ibanAccredito        
        - name: idDominio
          in: path
          description: Identificativo del dominio
          required: true
          schema:
            type: string      
      responses:
        '200':
          description: Lista paginata dei domini ricercati
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './comuni.yaml#/listaPaginata'
                  - type: object
                    required:
                      - risultati
                    properties:
                      risultati:
                        type: array
                        items:
                          $ref: './dominio.yaml#/ibanAccredito'
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403' 
        '500':
          $ref: './errori.yaml#/responses/500'
  '/domini/{idDominio}/ibanAccredito/{ibanAccredito}':
    get:
      tags:
        - Domini
      summary: Lettura dei dati di un iban di accredito
      parameters:
        - in: path
          name: idDominio
          schema:
            type: string
          description: Codice fiscale del beneficiario
          required: true
        - name: ibanAccredito
          in: path
          description: Iban di accredito
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Dettaglio dell'iban di accredito
          content:
            application/json:
              schema:
                $ref: './dominio.yaml#/ibanAccredito'
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403' 
        '500':
          $ref: './errori.yaml#/responses/500'
  '/domini/{idDominio}/entrate':
    get:
      tags:
        - Domini
      summary: Elenco delle tipologie di entrata del dominio
      parameters:
        - $ref: './comuni.yaml#/pagina'
        - $ref: './comuni.yaml#/risultatiPerPagina'
        - $ref: './comuni.yaml#/campi'
        - $ref: './comuni.yaml#/abilitato' 
        - name: ordinamento
          in: query
          description: >-
            csv dei campi su cui ordinare i risultati, preceduti da + o - per ascendente o discendente (default ascendente)
             * idEntrata
          required: false
          schema:
            type: string
            format: csv
            default: +idEntrata
        - name: idDominio
          in: path
          description: Identificativo del dominio
          required: true
          schema:
            type: string      
      responses:
        '200':
          description: Lista paginata delle entrate ricercate
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './comuni.yaml#/listaPaginata'
                  - type: object
                    required:
                      - risultati
                    properties:
                      risultati:
                        type: array
                        items:
                          $ref: './dominio.yaml#/entrata'
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403' 
        '500':
          $ref: './errori.yaml#/responses/500'
  '/domini/{idDominio}/entrate/{idEntrata}':
    get:
      tags:
        - Domini
      summary: Lettura dei dati di una entrata
      parameters:
        - in: path
          name: idDominio
          schema:
            type: string
          description: Codice fiscale del beneficiario
          required: true
        - name: idEntrata
          in: path
          description: Identificativo della tipologia di entrata
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Dettaglio dell'entrata
          content:
            application/json:
              schema:
                $ref: './dominio.yaml#/entrata'
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403' 
        '500':
          $ref: './errori.yaml#/responses/500'
  '/pagamenti':
    post:
      summary: Avvio di un pagamento di pendenze
      tags:
        - Pagamenti
      description: >-
        L'operazione consente di avviare una sessione di pagamento per una o più
        pendenze. Le pendenze presenti in posizione debitoria possono essere
        riferite tramite identificativo della pendenza del gestionale proprietario 
        (_idA2A_ e _idPendenza_) oppure con l'identificativo avviso (_idDominio_ 
        e _iuv_). Nel caso invece di pendenze note al portale, è possibile
        fornire direttamente i dati della pendenza.
      parameters:
        - in: query
          name: idSessionePortale
          description: Identificativo della sessione di pagamento nel portale.
          required: false
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: './pagamenti.yaml#/pagamentoPost'
      responses:
        '201':
          description: Pagamento creato
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                  - location
                  - redirect
                properties:
                  id:
                    type: string
                    description: identificativo del pagamento
                    example: 12345
                  location:
                    type: string
                    description: Url del dettaglio del pagamento
                    example: /pagamenti/12345
                  redirect:
                    type: string
                    description: url a cui redirigere il navigatore per proseguire nel pagamento.
                    example: >-
                      https://www.comune.it/pagopa/pap/bdd07392-d90d-11e7-9296-cec278b6b50a
                  idSession:
                    type: string
                    description: identificativo della sessione di pagamento per la riconciliazione in al ritorno dal psp.
                    example: bdd07392-d90d-11e7-9296-cec278b6b50a
        '400':
          $ref: './errori.yaml#/responses/400'
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403'
        '500':
          $ref: './errori.yaml#/responses/500'
        '502':
          $ref: './errori.yaml#/responses/502'
    get:
      summary: Lista dei pagamenti
      tags:
        - Pagamenti
      parameters:
        - $ref: './comuni.yaml#/pagina'
        - $ref: './comuni.yaml#/risultatiPerPagina'
        - $ref: './comuni.yaml#/campi'
        - name: ordinamento
          in: query
          description: >-
            csv dei campi su cui ordinare i risultati, preceduti da + o - per ascendente o discendente (default ascendente)
             * dataRichiestaPagamento
             * stato
          required: false
          schema:
            type: string
            format: csv
            default: +dataRichiestaPagamento
        - in: query
          name: stato
          description: Filtro sullo stato del pagamento
          required: false
          schema:
            $ref: '#/components/schemas/statoPagamento'
        - in: query
          name: versante
          description: Filtro sul codice fiscale del versante
          required: false
          schema:
            type: string
            example: 'RSSMRA30A01H501I'
        - in: query
          name: idSessionePortale
          description: Filtro sull'identificativo di sessione assegnato dal chiamante
          required: false
          schema:
            type: string
            example: 'c8be909b-2feb-4ffa-8f98-704462abbd1d'
      responses:
        '200':
          description: Elenco dei pagamenti da portale
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './comuni.yaml#/listaPaginata'
                  - type: object
                    required:
                      - risultati
                    properties:
                      risultati:
                        type: array
                        items:
                          $ref: './pagamenti.yaml#/pagamentoIndex'
        '400':
          $ref: './errori.yaml#/responses/400'
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403'
        '500':
          $ref: './errori.yaml#/responses/500'
        '502':
          $ref: './errori.yaml#/responses/502'
  '/pagamenti/{id}':
    get:
      summary: Dettaglio di un pagamento
      tags:
        - Pagamenti
      parameters:
        - in: path
          name: id
          description: Identificativo del pagamento
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Dettaglio del pagamento
          content:
            application/json:
              schema:
                $ref: './pagamenti.yaml#/pagamento'
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403'
        '404':
          $ref: './errori.yaml#/responses/400'
        '500':
          $ref: './errori.yaml#/responses/500'
          
          
          
          
  '/pendenze':
    get:
      summary: Elenco delle pendenze
      description: Fornisce la lista delle pendenze filtrata ed ordinata.
      tags:
        - Pendenze
      parameters:
        - $ref: './comuni.yaml#/pagina'
        - $ref: './comuni.yaml#/risultatiPerPagina'
        - $ref: './comuni.yaml#/campi'      
        - name: ordinamento
          in: query
          description: >-
            csv dei campi su cui ordinare i risultati, preceduti da + o - per ascendente o discendente (default ascendente)
             * dataCaricamento
             * dataScadenza
             * dataValidita
             * stato
          required: false
          schema:
            type: string
            format: csv
            default: +dataRichiestaPagamento
        - name: idDominio
          in: query
          description: filtro per dominio creditore
          required: false
          schema:
            type: string
        - name: idA2A
          in: query
          description: filtro per gestionale
          required: false
          schema:
            type: string
        - name: idDebitore
          in: query
          description: filtro per codice fiscale o p. iva del soggetoto debitore
          required: false
          schema:
            type: string
        - name: stato
          in: query
          description: filtro sullo stato della pendenza
          required: false
          schema:
            $ref: '#/components/schemas/statoPendenza'
        - in: query
          name: idPagamento
          description: Identificativo del pagamento
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Elenco delle pendenze che rispettano i filtri di ricerca
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './comuni.yaml#/listaPaginata'
                  - type: object
                    required:
                      - risultati
                    properties:
                      risultati:
                        type: array
                        items:
                          $ref: '#/components/schemas/pendenza'
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403'
        '500':
          $ref: './errori.yaml#/responses/500'
  '/pendenze/{idA2A}/{idPendenza}':
    get:
      summary: Dettaglio di una pendenza per identificativo
      description: >-
        Acquisisce il dettaglio di una pendenza, comprensivo dei dati di
        pagamento.
      tags:
        - Pendenze
      parameters:
        - in: path
          name: idA2A
          description: Identificativo del gestionale
          required: true
          schema:
            type: string
        - in: path
          name: idPendenza
          description: Identificativo della pendenza
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Informazioni dettagliate della pendenza
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/pendenza'
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403'
        '404':
          $ref: './errori.yaml#/responses/404'
        '500':
          $ref: './errori.yaml#/responses/500'
  '/rpp':
    get:
      summary: Lista delle richieste di pagamento pendenza
      tags:
        - Pagamenti
      parameters:
        - in: query
          name: pagina
          description: Numero di pagina dei risultati
          required: false
          schema:
            type: integer
            default: 1
        - in: query
          name: risultatiPerPagina
          description: Numero massimo di risultati nella risposta
          required: false
          schema:
            type: integer
            default: 25
            maximum: 200
        - name: ordinamento
          in: query
          description: >-
            csv dei campi su cui ordinare i risultati, preceduti da + o - per ascendente o discendente (default ascendente)
             * dataRichiesta
             * esito
          required: false
          schema:
            type: string
            format: csv
            default: +dataRichiesta
        - name: campi
          in: query
          description: >-
            csv dei campi da includere nella risposta (default tutti)
          required: false
          schema:
            type: string
            format: csv
        - in: query
          name: idDominio
          description: Codice fiscale del dominio beneficiario
          required: false
          schema:
            type: string
        - in: query
          name: iuv
          description: Identificativo univoco di versamento
          required: false
          schema:
            type: string
        - in: query
          name: ccp
          description: codice contesto pagamento
          required: false
          schema:
            type: string
        - in: query
          name: idA2A
          description: Codice del gestionale proprietario della pendenza
          required: false
          schema:
            type: string
        - in: query
          name: idPendenza
          description: Identrificativo della pendenza nel gestionale proprietario
          required: false
          schema:
            type: string
        - in: query
          name: esito
          description: esito della richiesta di pagamento
          required: false
          schema:
            $ref: '#/components/schemas/esitoRpt'
        - in: query
          name: idPagamento
          description: Identificativo del pagamento
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Lista delle richieste di pagamento pendenza che rispettano i criteri di ricerca
          content:
            application/json:
              schema:
                allOf:
                  - $ref: './comuni.yaml#/listaPaginata'
                  - type: object
                    required:
                      - risultati
                    properties:
                      risultati:
                        type: array
                        items:
                          $ref: '#/components/schemas/rpp'            
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403'
        '500':
          $ref: './errori.yaml#/responses/500'
  '/rpp/{idDominio}/{iuv}/{ccp}':
    get:
      summary: Dettaglio di una richiesta di pagamento pendenza
      tags:
        - Pagamenti
      parameters:
        - in: path
          name: idDominio
          description: Codice fiscale del dominio beneficiario
          required: true
          schema:
            type: string
        - in: path
          name: iuv
          description: Identificativo univoco di versamento
          required: true
          schema:
            type: string
        - in: path
          name: ccp
          description: Codice di contesto pagamento
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Dettaglio della richiesta di pagamento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/rpp'
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403'
        '404':
          $ref: './errori.yaml#/responses/400'
        '500':
          $ref: './errori.yaml#/responses/500'      
  '/rpp/{idDominio}/{iuv}/{ccp}/rpt':
    get:
      summary: Acquisizione della richiesta di pagamento pagopa
      tags:
        - Pagamenti
      parameters:
        - in: path
          name: idDominio
          description: Codice fiscale del dominio beneficiario
          required: true
          schema:
            type: string
        - in: path
          name: iuv
          description: Identificativo univoco di versamento
          required: true
          schema:
            type: string
        - in: path
          name: ccp
          description: Codice di contesto pagamento
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Richiesta di pagamento
          content:
            application/xml:
              schema:
                type: string
                example: xml della richiesta di pagamento pagopa
            application/json:
              schema:
                type: string
                example: conversione json della richiesta di pagamento pagopa
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403'
        '404':
          $ref: './errori.yaml#/responses/404'
        '500':
          $ref: './errori.yaml#/responses/500'            
  '/rpp/{idDominio}/{iuv}/{ccp}/rt':
    get:
      summary: Acquisizione della ricevuta di pagamento
      tags:
        - Pagamenti
      parameters:
        - in: path
          name: idDominio
          description: Codice fiscale del dominio beneficiario
          required: true
          schema:
            type: string
        - in: path
          name: iuv
          description: Identificativo univoco di versamento
          required: true
          schema:
            type: string
        - in: path
          name: ccp
          description: Codice di contesto pagamento
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ricevuta di pagamento
          content:
            application/pdf:
              schema:
                type: string
                format: binary
                example: stampa della ricevuta
            application/xml:
              schema:
                type: string
                example: xml della ricevuta
            application/json:
              schema:
                type: string
                example: conversione json della ricevuta
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403'
        '404':
          $ref: './errori.yaml#/responses/404'
        '500':
          $ref: './errori.yaml#/responses/500'      
  '/avvisi/{idDominio}/{iuv}':
    get:
      summary: Avviso di pagamento
      description: >-
        Fornisce un avviso di pagamento o la pendenza ad esso associata
      tags:
        - Pendenze
      parameters:
        - in: path
          name: idDominio
          description: Identificativo del dominio dell'ente
          required: true
          schema:
            type: string
        - in: path
          name: iuv
          description: Identificativo del versamento
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Avviso di pagamento
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/avviso'
            application/pdf:
              schema:
                type: string
                format: binary
        '401':
          $ref: './errori.yaml#/responses/401'
        '403':
          $ref: './errori.yaml#/responses/403'
        '404':
          $ref: './errori.yaml#/responses/404'
        '500':
          $ref: './errori.yaml#/responses/500'
components:
  securitySchemes:
    basicAuth:
      type: http
      scheme: basic
  schemas:
    intermediarioPost:
      type: object
      required:
        - denominazione
        - pagopaConnector
      properties:
        denominazione:
          type: string
          description: Ragione sociale dell'intermediario PagoPA
          example: Intermediario PagoPA
        principalPagoPa:
          type: string
          description: Principal autenticato le richieste ricevute da PagoPA
        servizioPagoPa:
          $ref: '#/components/schemas/connector'   
        abilitato:
          type: boolean
          description: Indica lo stato di abilitazione
          example: true
    intermediario:
      type: object
      allOf:
        - type: object
          required:
            - idIntermediario
          properties:
            idIntermediario:
              type: string
              description: Identificativo dell'intermediario
              example: 9999999999
        - $ref: '#/components/schemas/intermediarioPost'  
        - type: object
          oneOf:
          - type: object
            required:
              - stazioni
            properties:
              stazioni:
                type: string
                description: Url alla lista delle stazioni dell'intermediario
                example: '/intermediari/9999999999/stazioni'
          - type: object
            required:
              - stazioni
            properties:
              stazioni:
                type: array
                items:
                  $ref: '#/components/schemas/stazione'  
    stazionePost:
      type: object
      required:
        - password
        - abilitato
      properties:
        password:
          type: string
          description: Ragione sociale dell'intermediario PagoPA
          example: 123456
        abilitato:
          type: boolean
          description: Indica lo stato di abilitazione
    stazione:
      type: object
      allOf:
        - type: object
          required:
            - idStazione
          properties:
            idStazione:
              type: string
              description: Identificativo della stazione
              example: '9999999999_01'
        - $ref: '#/components/schemas/stazionePost'  
        - type: object
          oneOf:
          - type: object
            required:
              - domini
            properties:
              domini:
                type: string
                description: Url alla lista dei domini della stazione
                example: '/domini?stazione=9999999999_01'
          - type: object
            required:
              - domini
            properties:
              domini:
                type: array
                items:
                  $ref: '#/components/schemas/dominio'   
    codificaAvvisi:
      type: object
      description: informazioni sulla codifica e decodifica degli iuv
      properties:
        codificaIuv:
          type: string
          description: Cifra identificativa negli IUV. Deve essere un codice numerico.
          example: '01'
        regExpIuv:
          type: string
          description: Espressione regolare di verifica del numero avviso
          example: '[0,1]*'
        generazioneIuvInterna:
          type: boolean
          description: Indicazione se l'applicazione genera in autonomia gli iuv
          example: true 
    applicazionePost:
      type: object
      required:
        - principal
      properties:
        principal:
          type: string
          description: Identificativo di autenticazione
          example: aaa12345
        codificaAvvisi:
          $ref: '#/components/schemas/codificaAvvisi'
        domini:
          type: array
          description: domini su cui e' abilitato ad operare
          items: 
            type: string
            example:
              - 01234567890
              - 01234567891
              - 01234567893
        entrate:
          type: array
          description: entrate su cui e' abilitato ad operare
          items: 
            type: string
            example:
              - IMU
              - TARI
              - TASI  
        servizioVerifica:
          $ref: '#/components/schemas/connector'   
        servizioNotifica:
          $ref: '#/components/schemas/connector'   
        abilitato:
          type: boolean
          description: Indicazione se il creditore è abilitato ad operare sulla piattaforma
          example: true
          default: true
    applicazione:
      required:
        - idA2A
        - principal
        - abilitato
      properties:
        idA2A:
          type: string
          description: Identificativo dell'applicazione
          example: A2A-12345
        principal:
          type: string
          description: Identificativo di autenticazione
          example: aaa12345
        codificaAvvisi:
          $ref: '#/components/schemas/codificaAvvisi'
        domini:
          type: array
          description: domini su cui e' abilitato ad operare
          items: 
            $ref: '#/components/schemas/dominio'
        entrate:
          type: array
          description: entrate su cui e' abilitato ad operare
          items: 
            $ref: '#/components/schemas/tipoEntrata'
        servizioVerifica:
          $ref: '#/components/schemas/connector'   
        servizioNotifica:
          $ref: '#/components/schemas/connector'   
        abilitato:
          type: boolean
          description: Indicazione se il creditore è abilitato ad operare sulla piattaforma
          example: true        
          default: true          
    operatorePost:
      type: object
      properties:
        ragioneSociale:
          type: string
          description: Nome e cognome dell'operatore
          example: Mario Rossi
        domini:
          type: array
          description: domini su cui e' abilitato ad operare. Se la lista e' vuota, l'abilitazione e' per tutti i domini
          items: 
            type: string
            example:
              - 01234567890
              - 01234567891
              - 01234567893
        entrate:
          type: array
          description: entrate su cui e' abilitato ad operare. Se la lista e' vuota, l'abilitazione e' per tutte le entrate
          items: 
            type: string
            example:
              - IMU
              - TARI
              - TASI
        abilitato:
          type: boolean
          description: Indicazione se l'operatore è abilitato ad operare sulla piattaforma
          example: 'true'
    operatore:
      type: object
      required:
        - principal   
        - ragioneSociale
        - domini
        - entrate
      properties:
        principal:
          type: string
          description: Username dell'operatore
          example: operatore001      
        ragioneSociale:
          type: string
          description: Nome e cognome dell'operatore
          example: Mario Rossi
        domini:
          type: array
          description: domini su cui e' abilitato ad operare
          items: 
            $ref: '#/components/schemas/dominio'
        entrate:
          type: array
          description: entrate su cui e' abilitato ad operare
          items: 
            $ref: '#/components/schemas/tipoEntrata'
        abilitato:
          type: boolean
          description: Indicazione se l'operatore è abilitato ad operare sulla piattaforma
          example: 'true'


    rpp:
      type: object
      allOf:
        - type: object
          required: 
            - stato
            - rpt
          properties:
            stato:
              type: string
              description: Stato della richiesta di pagamento sulla piattaforma PagoPA.
              example: RT_ACCETTATA_PA
            dettaglioStato:
              type: string
              description: >-
                Dettaglio fornito dal Nodo dei Pagamenti sullo stato della
                richiesta.
            segnalazioni:
              type: array
              items: 
                $ref: '#/components/schemas/segnalazione'
            rpt:
              type: object
              description: "Rpt inviata a PagoPa. {http://www.digitpa.gov.it/schemas/2011/Pagamenti/} ctRichiestaPagamentoTelematico"
            rt:
              type: object
              description: "Rt inviata da PagoPa. {http://www.digitpa.gov.it/schemas/2011/Pagamenti/} ctRicevutaTelematica"  
        - type: object
          oneOf:
            - type: object
              required:
                - pendenza
              properties:
                pendenza:
                  type: string
                  description: Url al dettaglio della pendenza
                  example: '/pendenze/A2A-12345/abcdef12345'
            - type: object
              required: 
                - properties
              properties:
                pendenza:
                  $ref: '#/components/schemas/pendenza'
    riscossione:
      type: object
      required:
        - idDominio
        - iuv
        - iur
        - indice
        - pendenza
        - idVocePendenza
        - stato
        - tipo
        - importo
        - data
      properties:
        idDominio:
          type: string
          description: Identificativo ente creditore
          example: 01234567890
        iuv:
          type: string
          description: Identificativo univoco di versamento
          example: RF23567483937849450550875
        iur:
          type: string
          description: Identificativo univoco di riscossione.
          example: '1234acdc'
        indice:
          type: number
          description: indice posizionale della voce pendenza riscossa
          example: 1
        pendenza:
          type: string
          description: Url della pendenza oggetto della riscossione
          example: '/pendenze/idA2A/abcdef12345'
        idVocePendenza:
          type: string
          description: >-
            Identificativo della voce di pedenza,interno alla pendenza, nel gestionale
            proprietario a cui si riferisce la riscossione
          example: abcdef12345_1
        rpp:
          type: string
          description: Url richiesta di pagamento che ha realizzato la riscossione. Se non valorizzato, si tratta di un pagamento senza RPT
          example: '/rpp/01234567890/RF23567483937849450550875/n%2Fa'
        stato:
          $ref: '#/components/schemas/statoRiscossione'
        tipo:
          $ref: '#/components/schemas/tipoRiscossione'
        importo:
          type: number
          description: >-
            Importo riscosso. 
          example: 10.01
        data:
          type: string
          format: date
          description: Data di esecuzione della riscossione
          example: '2020-12-31'
        commissioni:
          type: number
          description: Importo delle commissioni applicate al pagamento dal PSP
          example: 1.5
        allegato:
          $ref: '#/components/schemas/allegato'
        incasso:
          type: string
          description: Riferimento all'operazione di incasso
          example: "2017-01-01ABI00000011234"
    allegato:
      type: object
      required:
        - tipo
        - testo
      properties:
        tipo:
          description: Tipologia di allegato
          type: string
          enum:
            - Esito pagamento
            - Marca da bollo
        testo:
          description: allegato codificato in base64
          type: string
    flussoRendicontazioneIndex:
      type: object
      required:
        - idFlusso
        - dataFlusso
        - trn
        - dataRegolamento
        - idPsp
        - idDominio
        - numeroPagamenti
        - importoTotale
      properties:
        idFlusso:
          type: string
          description: identificativo del flusso di rendicontazione
          example: 2017-11-21GovPAYPsp1-10:27:27.903
        dataFlusso:
          type: string
          format: date
          description: Data di emissione del flusso
          example: '2020-12-31'
        trn:
          type: string
          description: Identificativo dell'operazione di riversamento assegnato dal psp debitore
          example: 'idriversamento123445'
        dataRegolamento:
          type: string
          format: date
          description: Data dell'operazione di riversamento fondi
          example: '2020-12-31'        
        idPsp:
          type: string
          description: Identificativo del psp che ha emesso la rendicontazione
          example: 'ABI-12345' 
        bicRiversamento:
          type: string
          description: Codice Bic della banca che ha generato il riversamento
          example: 'BIC-12345' 
        idDominio:
          type: string
          description: Identificativo del dominio creditore del riversamento
          example: 'BIC-12345' 
        numeroPagamenti:
          type: number
          description: numero di pagamenti oggetto della rendicontazione
        importoTotale:
          type: number
          description: somma degli importi rendicontati
          format: double
          example: 100.01
        segnalazioni:
          type: array
          items:
            $ref: '#/components/schemas/segnalazione'
    flussoRendicontazione:
      type: object
      allOf:
        - $ref: '#/components/schemas/flussoRendicontazioneIndex'
        - type: object
          properties:
            segnalazioni:
              type: array
              items:
                $ref: '#/components/schemas/segnalazione'
            rendicontazioni:
              type: array
              items:
                $ref: '#/components/schemas/rendicontazione'
    rendicontazione:
      type: object
      required:
        - iuv
        - iur
        - indice
        - importo
        - esito
        - data
      properties:
        iuv:
          type: string
          description: Identificativo univoco di versamento
          example: 'RF23567483937849450550875'
        iur:
          type: string
          description: Identificativo univoco di riscossione
          example: '1234acdc'
        indice:
          type: number
          description: Indice dell'occorrenza del pagamento all’interno della struttura datiSingoloPagamento della Ricevuta Telematica.
          example: 1          
        importo:
          type: number
          description: Importo rendicontato. 
          example: 10.01
        esito:
          type: number
          description: >
            Codice di esito dell'operazione rendicontata
             * 0 = Pagamento eseguito
             * 3 = Pagamento revocato
             * 9 = Pagamento eseguito in assenza di RPT
          example: 0
        data:
          type: string
          format: date
          description: Data di esito
          example: '2018-12-31'
        segnalazioni:
          type: array
          items:
            $ref: '#/components/schemas/segnalazione'
        riscossione:
          $ref: '#/components/schemas/riscossione'
    segnalazione:
      type: object
      required:
        - codice
        - descrizione
      properties:
        codice:
          type: string
        descrizione:
          type: string
    incassoPost:
      type: object
      required:
        - causale
        - importo
      properties:
        causale:
          type: string
          description: Causale dell'operazione di riversamento dal PSP alla Banca Tesoriera
          example: /PUR/LGPE-RIVERSAMENTO/URI/2017-01-01ABI00000011234
        importo:
          type: number
          format: double
          example: 100.01
        dataValuta:
          type: string
          format: date
          description: Data di valuta dell'incasso
          example: '2020-12-31'
        dataContabile:
          type: string
          format: date
          description: Data di contabile dell'incasso
          example: '2020-12-31'
        ibanAccredito:
          type: string
          description: Identificativo del conto di tesoreria su cui sono stati incassati i fondi
          example: IT60X0542811101000000123456
    incassoIndex:
      allOf:
        - type: object
          required:
            - idDominio
            - idIncasso
          properties:
            idDominio:
              type: string
              description: Identificativo ente creditore
              example: 01234567890
            idIncasso:
              type: string
              description: Identificativo dell'incasso
              example: '12345'
        - $ref: '#/components/schemas/incassoPost'
    incasso:
      allOf:
        - $ref: '#/components/schemas/incassoIndex'
        - type: object
          required:
            - riscossioni
          properties:
            riscossioni:
              type: array
              items: 
                $ref: '#/components/schemas/riscossione'
    tipoAutenticazioneBasic:
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
          example: username
        password:
          type: string
          example: password
    tipoAutenticazioneSSL:
      type: object
      required:
        - tipo
        - ksLocation
        - ksPassword
      properties:
        tipo:
          type: string
          enum: 
            - Client
            - Server
        ksLocation:
          type: string
          description: Location del keystore
        ksPassword:
          type: string
          description: Password del keystore
        tsLocation:
          type: string
          description: Location del truststore
        tsPassword:
          type: string
          description: Password del truststore    
    tipoAutenticazione:
      oneOf:
        - $ref: '#/components/schemas/tipoAutenticazioneBasic'
        - $ref: '#/components/schemas/tipoAutenticazioneSSL'
    connector:
      type: object
      required: 
        - url
      properties:
        url: 
          type: string
          description: Dati di integrazione ad un servizio web
        versioneApi:
          type: string
          description: Versione delle API di integrazione utilizzate
          example: 'REST_1'
          enum:
            - REST_1
            - SOAP_3
        auth:
          $ref: '#/components/schemas/tipoAutenticazione'

    esitoRpt:
      example: ESEGUITO
      type: string
      enum:
        - IN_CORSO
        - RIFIUTATO
        - ESEGUITO
        - NON_ESEGUITO
        - ESEGUITO_PARZIALE
        - DECORRENZA
        - DECORENNZA_PARZIALE
      description: > 
        Esito della richiesta di pagamento:
         * IN_CORSO: Pagamento in corso
         * RIFIUTATO: Pagamento rifiutato
         * ESEGUITO: Pagamento eseguito
         * NON_ESEGUITO: Pagamento non eseguito
         * ESEGUITO_PARZIALE: Pagamento parzialmente eseguito
         * DECORRENZA: Decorrenza termini
         * DECORRENZA_PARZIALE: Decorrenza termini parziale
    statoRiscossione:
      description: Stato della riscossione
      example: RISCOSSA
      type: string
      enum:
        - RISCOSSA
        - INCASSATA
    tipoRiscossione:
      description: > 
        Tipologia della voce riscossa
         * ENTRATA: Entrata in tesoreria
         * MBT: Marca da bollo telematica
      type: string
      enum:
        - ENTRATA
        - MBT
    aclPost:
      type: object
      required:
        - servizio
        - autorizzazioni
      properties:
        ruolo:
          type: string
          description: ruolo a cui si applica l'acl
          example: Operatore
        principal:
          type: string
          description: principal a cui si applica l'acl
          example: user001
        servizio:
          type: string
          description: >- 
            Servizio oggetto dell'autorizzazione
             * Anagrafica PagoPA
             * Anagrafica Creditore
             * Anagrafica Applicazioni
             * Anagrafica Ruoli
             * Pendenze e Pagamenti
             * Pendenze e Pagamenti propri 
             * Rendicontazioni e Incassi
             * Giornale degli Eventi
             * Statistiche
             * Configurazione e Manutenzione
          enum:
            - Anagrafica PagoPA
            - Anagrafica Creditore
            - Anagrafica Applicazioni
            - Anagrafica Ruoli
            - Pagamenti e Pendenze
            - Rendicontazioni e Incassi
            - Giornale degli Eventi
            - Statistiche
            - Configurazione e manutenzione
          example:
            Pendenze e Pagamenti
        autorizzazioni:
          type: array
          items:
            type: string
            enum:
             - Lettura
             - Scrittura
             - Esecuzione
          example:
            - Lettura
            - Scrittura
    acl:
      type: object
      allOf:
        - type: object
          required:
           - id
          properties:
            id:
              type: string
              description: identificativo dell'acl
              example: '1234'
        - $ref: '#/components/schemas/aclPost'
    evento:
      type: object
      required:
        - idDominio
        - iuv
        - ccp
        - tipoEvento
      properties:
        idDominio:
          type: string
          description: Identificativo ente creditore
          example: 01234567890
        iuv:
          type: string
          description: Identificativo univoco di versamento
          example: RF23567483937849450550875
        ccp:
          type: string
          description: Codice contesto di pagamento
          example: '1234acdc'
        idPsp:
          type: string
          description: Identificativo del PSP
          example: 'ABI12345'
        tipoVersamento:
          type: string
          description: Tipologia di versamento realizzato
          example: '0'          
        componente:
          type: string
          description: Modulo interno che ha emesso l'evento
          example: 'FESP'
        categoriaEvento:
          type: string
          enum:
            - INTERNO
            - INTERFACCIA
          example: 'INTERFACCIA'
        tipoEvento:
          type: string
          example: 'nodoInviaRPT'
        identificativoFruitore:
          type: string
          example: 'Soggetto Creditore'
        identificativoErogatore:
          type: string
          example: 'NodoDeiPagamentiSPC'
        idCanale:
          type: string
          example: 'ABI12345_01'
        idStazione:
          type: string
          example: '99999999999_01'
        parametri:
          type: string
          example: ''
        dataOraRichiesta:
          type: string
          format: date-time
          description: Data emissione del messaggio di richiesta
          example: '2017-07-21T17:32:28Z'
        dataOraRisposta:          
          type: string
          format: date-time
          description: Data emissione del messaggio di risposta
          example: '2017-07-21T17:32:28Z'
        esito:
          type: string
          example: 'OK'
    avvisoPost:
      type: object
      required:
        - importo
        - dataValidita
        - dataScadenza
        - descrizione
        - tassonomiaAvviso
      properties:
        idPendenza:
          type: string
          description: Identificativo della pendenza nel gestionale chiamante
          example: abcdef12345
        importo:
          type: number
          description: >-
            Importo della pendenza. Deve corrispondere alla somma delle singole
            voci.
          example: 10.01
        dataValidita:
          type: string
          format: date
          description: >-
            Data di validita dei dati della pendenza, decorsa la quale la
            pendenza può subire variazioni.
          example: '2019-12-31'
        dataScadenza:
          type: string
          format: date
          description: >-
            Data di scadenza della pendenza, decorsa la quale non è più
            pagabile.
          example: '2020-12-31'
        descrizione:
          type: string
          description: Descrizione da inserire nell'avviso di pagamento
          example: 'Sanzione CdS n. abc00000'
        tassonomia:
          type: string
          description: Macro categoria della pendenza secondo la classificazione del creditore
          example: Sanzioni
        tassonomiaAvviso:
          $ref: '#/components/schemas/tassonomiaAvviso'
        pagatore:
          description: dati anagrafici del pagatore.
          type: object
          required:
            - tipo
            - identificativo
          properties:
            tipo:
              description: >-
                tipologia di soggetto, se persona fisica (F) o giuridica
                (G)
              type: string
              enum:
                - G
                - F
              example: F
            identificativo:
              description: codice fiscale o partita iva del soggetto
              type: string
              example: RSSMRA30A01H501I
            anagrafica:
              description: nome e cognome o altra ragione sociale del soggetto
              type: string
              example: Mario Rossi
    avviso:
      type: object
      required:
        - stato
      properties:
        stato:
          description: Stato dell'avviso
          example: Non pagato
          type: string
          enum:
            - Pagato
            - Non pagato
            - Scaduto
            - Annullato
        importo:
          type: number
          description: >-
            Importo della pendenza. Deve corrispondere alla somma delle singole
            voci.
          example: 10.01
        idDominio:
          type: string
          description: Identificativo del creditore dell'avviso
          example: 01234567890
        numeroAvviso:
          type: string
          description: 'Identificativo univoco versamento, assegnato se pagabile da psp'
          example: 123456789012345
        dataValidita:
          type: string
          format: date
          description: >-
            Data di validita dei dati della pendenza, decorsa la quale la
            pendenza può subire variazioni.
          example: '2019-12-31'
        dataScadenza:
          type: string
          format: date
          description: >-
            Data di scadenza della pendenza, decorsa la quale non è più
            pagabile.
          example: '2020-12-31'
        descrizione:
          type: string
          description: Descrizione da inserire nell'avviso di pagamento
          example: 'Sanzione CdS n. abc00000'
        tassonomiaAvviso:
          type: string
          description: Macro categoria della pendenza secondo la classificazione AgID
          example: Sanzioni
        qrcode:
          type: string
          description: Testo da codificare nel qr-code dell'avviso
        barcode:
          type: string
          description: Testo da codificare nel bar-code dell'avviso
    operazioneIndex:
      type: object
      required: 
        - idOperazione
        - descrizione
        - location
      properties:
        idOperazione:
          type: string
          example: spedizioneNotifiche
        descrizione:
          type: string
          example: Avvia il processo di spedizione delle notifiche di pagamento
        location:
          type: string
          example: '/operazione/spedizioneNotifiche'
    operazione:
      type: object
      allOf:
        - $ref: '#/components/schemas/operazioneIndex'          
        - type: object
          required: 
            - stato
            - esito
          properties:
            stato:
              type: number
              enum:
                - 0
                - 1
                - 2
              example: 0
            esito:
              type: string
              description: Descrizione dell'esito dell'esecuzione
              example: 'Operazione completata con successo'
            dettaglio:
              type: string
              example: 'Consegnate 12 notifiche'