pagamentoPost: 
  type: object
  required:
    - pendenze
  properties:
    pendenze:
      type: array
      description: pendenze o riferimenti alle pendenze oggetto del pagamento
      items:
        anyOf:
          - type: object
            required:
              - idA2A
              - idPendenza
            properties:
              idA2A:
                type: string
                description: >-
                  Identificativo del gestionale responsabile della
                  pendenza
                example: A2A_12345
              idPendenza:
                type: string
                description: >-
                  Identificativo della pendenza nel gestionale
                  responsabile
                example: abcdef12345
          - type: object
            required:
              - idDominio
              - iuv
            properties:
              idDominio:
                type: string
                description: Codice fiscale dell'ente creditore
                example: 01234567890
              numeroAvviso:
                type: string
                description: >-
                  Numero avviso della pendenza, assegnato se
                  pagabile da psp
                example: 123456789012345678
          - $ref: './pendenze.yaml#/pendenzaPost'
    urlRitorno:
      type: string
      description: >-
        url di ritorno al portale al termine della sessione di pagamento
      example: >-
        https://www.comune.it/pagamentopagopa/abcd-efgh-ijklm-12345
    contoAddebito:
      type: object
      description: >-
        Dati necessari alla realizzazione dei pagamenti per Addebito
        Diretto, se previsto dal profilo del versante.
      required:
        - ibanAddebito
      properties:
        ibanAddebito:
          type: string
          description: Iban di addebito del pagatore.
          example: IT02L1234512345123456789012
        bicAddebito:
          type: string
          description: Bic della banca di addebito del pagatore.
          example: MYBICODE
    dataEsecuzionePagamento:
      type: string
      format: date
      example: '2018-12-31'
      description: >-
        data in cui si richiede che venga effettuato il pagamento, se diversa dalla data corrente.
    credenzialiPagatore:
      type: string
      description: >-
        Eventuali credenziali richieste dal PSP necessarie per
        completare l'operazione (ad esempio un codice bilaterale
        utilizzabile una sola volta).
    soggettoVersante:
      $ref: './comuni.yaml#/soggetto'
    autenticazioneSoggetto:
      type: string
      enum:
        - CNS
        - USR
        - OTH
        - N/A
      description: modalita' di autenticazione del soggetto versante
    lingua:
      type: string
      description: Indica il codice della lingua da utilizzare per l’esposizione delle pagine web.
      enum:
        - IT
        - EN
        - FR
        - DE
        - SL
      default: IT
      example: IT  
pagamentoIndex:
  type: object
  required:
    - id
    - dataRichiestaPagamento
    - stato
  properties:
    id:
      type: string
      example: 'f9866575-e255-4d10-9845-57ba88bec136'
      description: Identificativo del pagamento assegnato da GovPay
    idSessionePortale:
      type: string
      example: 'c8be909b-2feb-4ffa-8f98-704462abbd1d'
      description: Identificativo del pagamento assegnato dal portale chiamante
    idSessionePsp:
      type: string
      example: '7f905970-cfe9-4ee5-a9a7-81fe14e7437e'
      description: Identificativo del pagamento assegnato dal psp utilizzato
    importo:
      type: number
      description: >-
        Importo del pagamento. Corrisponde alla somma degli importi delle pendenze al momento della richiesta
    stato:
      $ref: '#/components/schemas/statoPagamento'
    pspRedirectUrl:
      type: string
      example: 'https://www.psp.it/payment?sessionId=7f905970-cfe9-4ee5-a9a7-81fe14e7437e'
      description: Url di redirect al psp inviata al versante per perfezionare il pagamento, se previsto dal modello
    urlRitorno:
      type: string
      description: >-
        url di ritorno al portale al termine della sessione di pagamento
      example: >-
        https://www.comune.it/pagamentopagopa/abcd-efgh-ijklm-12345
    contoAddebito:
      type: object
      description: >-
        Dati necessari alla realizzazione dei pagamenti per Addebito
        Diretto, se previsto dal profilo del versante.
      required:
        - ibanAddebito
      properties:
        ibanAddebito:
          type: string
          description: Iban di addebito del pagatore.
          example: IT02L1234512345123456789012
        bicAddebito:
          type: string
          description: Bic della banca di addebito del pagatore.
          example: MYBICODE
    dataEsecuzionePagamento:
      type: string
      format: date
      example: '2018-12-31'
      description: >-
        data in cui si richiede che venga effettuato il pagamento, se diversa dalla data corrente.
    credenzialiPagatore:
      type: string
      description: >-
        Eventuali credenziali richieste dal PSP necessarie per
        completare l'operazione (ad esempio un codice bilaterale
        utilizzabile una sola volta).
    soggettoVersante:
      $ref: '#/components/schemas/soggetto'
    autenticazioneSoggetto:
      type: string
      enum:
        - CNS
        - USR
        - OTH
        - N/A
      description: modalita' di autenticazione del soggetto versante
    lingua:
      type: string
      description: Indica il codice della lingua da utilizzare per l’esposizione delle pagine web.
      enum:
        - IT
        - EN
        - FR
        - DE
        - SL
      default: IT
      example: IT                
    pendenze:
      type: string
      description: Url per le pendenze oggetto del Pagamento
      example: '/pendenze?idPagamento=f9866575-e255-4d10-9845-57ba88bec136'  
    rpp:
      type: string
      description: Url per le richieste di pagamento oggetto del Pagamento
      example: '/rpp?idPagamento=f9866575-e255-4d10-9845-57ba88bec136'
pagamento:
  type: object
  required:
    - id
    - dataRichiestaPagamento
    - stato
  properties:
    id:
      type: string
      example: 'f9866575-e255-4d10-9845-57ba88bec136'
      description: Identificativo del pagamento assegnato da GovPay
    idSessionePortale:
      type: string
      example: 'c8be909b-2feb-4ffa-8f98-704462abbd1d'
      description: Identificativo del pagamento assegnato dal portale chiamante
    idSessionePsp:
      type: string
      example: '7f905970-cfe9-4ee5-a9a7-81fe14e7437e'
      description: Identificativo del pagamento assegnato dal psp utilizzato
    importo:
      type: number
      description: >-
        Importo del pagamento. Corrisponde alla somma degli importi delle pendenze al momento della richiesta
    stato:
      $ref: '#/statoPagamento'
    pspRedirectUrl:
      type: string
      example: 'https://www.psp.it/payment?sessionId=7f905970-cfe9-4ee5-a9a7-81fe14e7437e'
      description: Url di redirect al psp inviata al versante per perfezionare il pagamento, se previsto dal modello
    urlRitorno:
      type: string
      description: >-
        url di ritorno al portale al termine della sessione di pagamento
      example: >-
        https://www.comune.it/pagamentopagopa/abcd-efgh-ijklm-12345
    contoAddebito:
      type: object
      description: >-
        Dati necessari alla realizzazione dei pagamenti per Addebito
        Diretto, se previsto dal profilo del versante.
      required:
        - ibanAddebito
      properties:
        ibanAddebito:
          type: string
          description: Iban di addebito del pagatore.
          example: IT02L1234512345123456789012
        bicAddebito:
          type: string
          description: Bic della banca di addebito del pagatore.
          example: MYBICODE
    dataEsecuzionePagamento:
      type: string
      format: date
      example: '2018-12-31'
      description: >-
        data in cui si richiede che venga effettuato il pagamento, se diversa dalla data corrente.
    credenzialiPagatore:
      type: string
      description: >-
        Eventuali credenziali richieste dal PSP necessarie per
        completare l'operazione (ad esempio un codice bilaterale
        utilizzabile una sola volta).
    soggettoVersante:
      $ref: './comuni.yaml#/soggetto'
    autenticazioneSoggetto:
      type: string
      enum:
        - CNS
        - USR
        - OTH
        - N/A
      description: modalita' di autenticazione del soggetto versante
    lingua:
      type: string
      description: Indica il codice della lingua da utilizzare per l’esposizione delle pagine web.
      enum:
        - IT
        - EN
        - FR
        - DE
        - SL
      default: IT
      example: IT                
    pendenze:
      type: array
      items: 
        $ref: './pendenze.yaml#/pendenza'
    rpp:
      type: array
      items: 
        $ref: './rpp.yaml#/rpp'
statoPagamento:
  type: string
  example: ESEGUITO
  enum:
    - IN_CORSO
    - ESEGUITO
    - NON_ESEGUITO
    - ESEGUITO_PARZIALE
    - ANNULLATO
    - FALLITO
  description: > 
    Stato del pagamento
     * IN_CORSO: Pagamento in corso
     * ANNULLATO: Pagamento annullato dall'utente o scaduto per timeout
     * FALLITO: Pagamento non perfezionato per errori della piattaforma
     * ESEGUITO: Pagamento concluso con successo
     * NON_ESEGUITO: Processo concluso senza il perfezionamento del pagamento
     * ESEGUITO_PARZIALE: Pagamento parzialmente eseguito        