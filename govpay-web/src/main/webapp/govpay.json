{
  "swagger": "2.0",
  "info": {
    "description": "API di integrazione ai servizi di pagamento di [GovPay](https://github.com/link-it/GovPay)",
    "version": "1.0",
    "title": "GovPay"
  },
  "host": "localhost:8080",
  "basePath": "/govpay/rs/v1/",
  "schemes": [
    "http"
  ],
  "securityDefinitions": {
    "basicAuth": {
      "type": "basic"
    }
  },
  "security": [
    {
      "basicAuth": []
    }
  ],
  "paths": {
    "/domini": {
      "get": {
        "tags": [
          "Anagrafica"
        ],
        "summary": "Elenco dei beneficiari censiti su GovPay",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "offset",
            "description": "Numero di risultati da omettere nella risposta",
            "required": false,
            "type": "integer",
            "default": 0
          },
          {
            "in": "query",
            "name": "limit",
            "description": "Numero massimo di risultati nella risposta",
            "required": false,
            "type": "integer",
            "default": 25,
            "maximum": 500
          }
        ],
        "responses": {
          "200": {
            "description": "Elenco dei beneficiari censiti",
            "schema": {
              "type": "array",
              "items": {
                "properties": {
                  "id_dominio": {
                    "type": "string",
                    "description": "Codice fiscale del beneficiario",
                    "example": "01234567890"
                  },
                  "ragione_sociale": {
                    "type": "string",
                    "description": "Ragione sociale del beneficiario",
                    "example": "Ente Creditore"
                  },
                  "abilitato": {
                    "type": "boolean",
                    "description": "Indicazione se il creditore e' abilitato ad operare sulla piattaforma",
                    "example": "true"
                  },
                  "url": {
                    "type": "string",
                    "description": "URL per l'acquisizione completa dei dati del beneficiario",
                    "example": "http://localhost:8080/govpay/rs/v1/domini/01234567890"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      }
    },
    "/domini/{idDominio}": {
      "get": {
        "tags": [
          "Anagrafica"
        ],
        "summary": "Lettura dei dati anagrafici di un beneficiario",
        "description": "Informazioni anagrafiche di un dominio censite sulla piattaforma ed utilizzate nella creazione delle RPT\n",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "description": "Codice fiscale del beneficiario",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Dati anagrafici del beneficiario",
            "schema": {
              "$ref": "#/definitions/Anagrafica"
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      }
    },
    "/psp": {
      "get": {
        "tags": [
          "Anagrafica"
        ],
        "summary": "Elenco dei PSP disponibili",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "filtri",
            "type": "string",
            "required": false,
            "description": "Filtri di ricerca"
          }
        ],
        "responses": {
          "200": {
            "description": "Elenco dei PSP aderenti a PagoPA",
            "schema": {
              "type": "array",
              "items": {
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "URL dove reperire l'anagrafica completa del beneficiario",
                    "example": "http://localhost:8080/govpay/rs/v1//psp/01234567890"
                  },
                  "anagrafica": {
                    "type": "string",
                    "description": "Ragione sociale del beneficiario",
                    "example": "Comune di Roma"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      }
    },
    "/psp/{idPsp}": {
      "get": {
        "tags": [
          "Anagrafica"
        ],
        "summary": "Lettura dei dati di un PSP",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idPsp",
            "type": "string",
            "description": "Identificativo del PSP",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Dati anagrafici del beneficiario",
            "schema": {
              "$ref": "#/definitions/Anagrafica"
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      }
    },
    "/psp/{idPsp}/{idCanale}": {
      "get": {
        "tags": [
          "Anagrafica"
        ],
        "summary": "Dati di un canale",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idPsp",
            "type": "string",
            "description": "Identificativo del PSP",
            "required": true
          },
          {
            "in": "path",
            "name": "idCanale",
            "type": "string",
            "description": "Identificativo del Canale di un PSP",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Dati anagrafici del beneficiario",
            "schema": {
              "$ref": "#/definitions/Anagrafica"
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      }
    },
    "/versamenti/{idDominio}": {
      "get": {
        "tags": [
          "Pagamenti in Attesa"
        ],
        "summary": "Elenco dei pagamenti in attesa di un dominio",
        "description": "Consultazione dei pagamenti in attesa di un dominio\n",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "query",
            "name": "filtri",
            "type": "string",
            "required": false,
            "description": "Filtri di ricerca per data, debitore, tassonomia, stato"
          }
        ],
        "responses": {
          "200": {
            "description": "Elenco dei pagamenti in attesa che rispettano i filtri impostati",
            "schema": {
              "type": "array",
              "items": {
                "allOf": [
                  {
                    "$ref": "#/definitions/PagamentoInAttesaBreve"
                  },
                  {
                    "$ref": "#/definitions/AnagraficaBreve"
                  }
                ]
              }
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      },
      "post": {
        "tags": [
          "Pagamenti in Attesa"
        ],
        "summary": "Creazione di un nuovo pagamento in attesa",
        "description": "Alimentazione dell'archivio dei Pagamenti in Attesa con un nuovo versamento ed emissione del relativo Avviso di Pagamento\n",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "description": "Codice fiscale del benediciario",
            "required": true
          },
          {
            "in": "body",
            "name": "versamento",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Versamento"
            }
          },
          {
            "in": "query",
            "name": "iuvprefix",
            "type": "integer",
            "required": false,
            "description": "Prefisso desiderato per la generazione dello IUV"
          }
        ],
        "responses": {
          "201": {
            "description": "Pagamento in Attesa creato con successo",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "description": "URL dove reperire il pagamento in attesa completo",
                  "example": "http://localhost:8080/govpay/rs/v1//versamenti/01234567890/123456789012345"
                },
                "iuv": {
                  "type": "number",
                  "description": "Identificativo Univoco Versamento assegnato",
                  "example": "123456789012345"
                },
                "numeroAvviso": {
                  "type": "number",
                  "description": "Numero dell'avviso emesso",
                  "example": "001123456789012345"
                },
                "location": {
                  "type": "string",
                  "description": "URL dove reperire il pagamento in attesa",
                  "example": "http://localhost:8080/govpay/rs/v1//versamenti/01234567890/123456789012345"
                },
                "pdfAvviso": {
                  "type": "string",
                  "description": "URL dove reperire la stampa dell'avviso",
                  "example": "http://localhost:8080/govpay/rs/v1//versamenti/01234567890/123456789012345/avviso"
                }
              }
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          },
          "422": {
            "description": "Validazione semantica dei dati inseriti fallita"
          }
        }
      }
    },
    "/versamenti/{idDominio}/{iuv}": {
      "put": {
        "tags": [
          "Pagamenti in Attesa"
        ],
        "summary": "Aggiornamento di un pagamento in attesa",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "description": "Codice fiscale del benediciario",
            "required": true
          },
          {
            "in": "body",
            "name": "versamento",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Versamento"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Pagamento in Attesa aggiornato con successo",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "description": "URL dove reperire il pagamento in attesa completo",
                  "example": "http://localhost:8080/govpay/rs/v1//versamenti/01234567890/123456789012345"
                },
                "iuv": {
                  "type": "number",
                  "description": "Identificativo Univoco Versamento assegnato",
                  "example": "123456789012345"
                },
                "numeroAvviso": {
                  "type": "number",
                  "description": "Numero dell'avviso emesso",
                  "example": "001123456789012345"
                },
                "location": {
                  "type": "string",
                  "description": "URL dove reperire il pagamento in attesa",
                  "example": "http://localhost:8080/govpay/rs/v1//versamenti/01234567890/123456789012345"
                },
                "pdfAvviso": {
                  "type": "string",
                  "description": "URL dove reperire la stampa dell'avviso",
                  "example": "http://localhost:8080/govpay/rs/v1//versamenti/01234567890/123456789012345/avviso"
                }
              }
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          },
          "404": {
            "description": "Pagamento in attesa da aggiornare inesistente"
          },
          "422": {
            "description": "Validazione semantica dei dati inseriti fallita"
          }
        }
      },
      "get": {
        "tags": [
          "Pagamenti in Attesa"
        ],
        "summary": "Lettura di un Pagamento in Attesa",
        "description": "Consultazione di uno specifico Pagamento in Attesa\n",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "path",
            "name": "iuv",
            "type": "string",
            "required": true,
            "description": "Identificativo Univoco Versamento assegnato al Pagamento in Attesa"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista dei pagamenti in attesa che rispettano i filtri impostati",
            "schema": {
              "$ref": "#/definitions/PagamentoInAttesa"
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      },
      "delete": {
        "tags": [
          "Pagamenti in Attesa"
        ],
        "summary": "Annullamento di un Pagamento in Attesa",
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "path",
            "name": "iuv",
            "type": "string",
            "required": true,
            "description": "Identificativo Univoco Versamento assegnato al Pagamento in Attesa"
          }
        ],
        "responses": {
          "200": {
            "description": "Pagamento in attesa annullato"
          },
          "401": {
            "description": "Richiesta non autorizzata"
          },
          "404": {
            "description": "Pagamento in attesa da annullare inesistente"
          }
        }
      }
    },
    "/versamenti/{idDominio}/{iuv}/avviso": {
      "get": {
        "tags": [
          "Pagamenti in Attesa"
        ],
        "summary": "Scarica la stampa dell'Avviso di Pagamento",
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "path",
            "name": "iuv",
            "type": "string",
            "required": true,
            "description": "Identificativo Univoco Versamento assegnato al Pagamento in Attesa"
          }
        ],
        "produces": [
          "application/pdf"
        ],
        "responses": {
          "200": {
            "description": "PDF dell'Avviso di Pagamento",
            "schema": {
              "type": "file"
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      }
    },
    "/rpts": {
      "get": {
        "tags": [
          "Richieste di pagamento"
        ],
        "summary": "Lista delle richieste di pagamento",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "filtri",
            "type": "string",
            "required": false,
            "description": "Filtri di ricerca per data, esito, stato"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista dele richieste di pagamento che rispettano i filtri impostati",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/RptBreve"
              }
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      },
      "post": {
        "tags": [
          "Richieste di pagamento"
        ],
        "summary": "Avvia una nuova richiesta di pagamento",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "versamenti",
            "required": true,
            "description": "Carrello di versamenti da pagare",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/VersamentoStrutturato"
                },
                {
                  "properties": {
                    "versante": {
                      "$ref": "#/definitions/Anagrafica"
                    },
                    "sceltaWisp": {
                      "$ref": "#/definitions/SceltaWisp"
                    }
                  }
                }
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista dei pagamenti che rispettano i filtri impostati",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/RptBreve"
              }
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      }
    },
    "/rpts/{idDominio}/{iuv}": {
      "get": {
        "tags": [
          "Richieste di pagamento"
        ],
        "summary": "Lista delle richieste di pagamento per uno IUV",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "path",
            "name": "iuv",
            "type": "string",
            "required": true,
            "description": "Identificativo Univoco di Versamento"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista delle richieste di pagamento per uno IUV",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/RptBreve"
              }
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      },
      "post": {
        "tags": [
          "Richieste di pagamento"
        ],
        "summary": "Avvia una nuova richiesta di pagamento per un pagamento in attesa",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "versamenti",
            "required": true,
            "description": "Carrello di versamenti da pagare",
            "schema": {
              "allOf": [
                {
                  "properties": {
                    "versante": {
                      "$ref": "#/definitions/Anagrafica"
                    },
                    "sceltaWisp": {
                      "$ref": "#/definitions/SceltaWisp"
                    }
                  }
                }
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista dei pagamenti che rispettano i filtri impostati",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/RptBreve"
              }
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          },
          "404": {
            "description": "Pagamento in attesa non esistente"
          }
        }
      }
    },
    "/rpts/{idDominio}/{iuv}/{ccp}": {
      "get": {
        "tags": [
          "Richieste di pagamento"
        ],
        "summary": "Leggi una richiesta di pagamento",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "path",
            "name": "iuv",
            "type": "string",
            "required": true,
            "description": "Identificativo Univoco di Versamento"
          },
          {
            "in": "path",
            "name": "ccp",
            "type": "string",
            "required": true,
            "description": "Codice contesto pagamento"
          }
        ],
        "responses": {
          "200": {
            "description": "Lettura di una richiesta di pagamento",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Rpt"
              }
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      }
    },
    "/rpts/{idDominio}/{iuv}/{ccp}/rt": {
      "get": {
        "tags": [
          "Richieste di pagamento"
        ],
        "summary": "Scarica la Ricevuta Telematica nel formato originale",
        "produces": [
          "application/octet-stream"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "path",
            "name": "iuv",
            "type": "string",
            "required": true,
            "description": "Identificativo Univoco di Versamento"
          },
          {
            "in": "path",
            "name": "ccp",
            "type": "string",
            "required": true,
            "description": "Codice contesto pagamento"
          }
        ],
        "responses": {
          "200": {
            "description": "Base64 della RT ricevuta dal Nodo dei Pagamenti",
            "schema": {
              "type": "file"
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      }
    },
    "/pagamenti/{idDominio}/{iuv}": {
      "get": {
        "tags": [
          "Pagamenti"
        ],
        "summary": "Lista dei pagamenti effettuati per uno IUV",
        "description": "Consultazione di uno specifico Pagamento in Attesa\n",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "path",
            "name": "iuv",
            "type": "string",
            "required": true,
            "description": "Identificativo Univoco Versamento assegnato al Pagamento in Attesa"
          },
          {
            "in": "query",
            "name": "filtri",
            "type": "string",
            "required": false,
            "description": "Filtri di ricerca per data pagamento, esito, stato"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista dei pagamenti che rispettano i filtri impostati",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/PagamentoBreve"
              }
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      }
    },
    "/pagamenti/{idDominio}/{iuv}/{iur}": {
      "get": {
        "tags": [
          "Pagamenti"
        ],
        "summary": "Leggi i dati di un pagamento",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "path",
            "name": "iuv",
            "type": "string",
            "required": true,
            "description": "Identificativo Univoco Versamento assegnato al Pagamento in Attesa"
          },
          {
            "in": "path",
            "name": "iur",
            "type": "string",
            "required": true,
            "description": "Identificatico univoco di riscossione"
          }
        ],
        "responses": {
          "200": {
            "description": "Dati di un pagamento",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Pagamento"
              }
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      },
      "delete": {
        "tags": [
          "Pagamenti"
        ],
        "summary": "Richiede lo storno di un pagamento",
        "consumes": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "path",
            "name": "iuv",
            "type": "string",
            "required": true,
            "description": "Identificativo Univoco Versamento assegnato al Pagamento in Attesa"
          },
          {
            "in": "path",
            "name": "iur",
            "type": "string",
            "required": true,
            "description": "Identificatico univoco di riscossione"
          }
        ],
        "responses": {
          "200": {
            "description": "Dati di un pagamento",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Pagamento"
              }
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      }
    },
    "/pagamenti/{idDominio}/{iuv}/{iur}/quietanza": {
      "get": {
        "tags": [
          "Pagamenti"
        ],
        "summary": "Scarica la stampa della quietanza di un pagamento",
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "path",
            "name": "iuv",
            "type": "string",
            "required": true,
            "description": "Identificativo Univoco Versamento assegnato al Pagamento in Attesa"
          },
          {
            "in": "path",
            "name": "iur",
            "type": "string",
            "required": true,
            "description": "Identificatico univoco di riscossione"
          }
        ],
        "produces": [
          "application/pdf"
        ],
        "responses": {
          "200": {
            "description": "Dati di un pagamento",
            "schema": {
              "type": "file"
            }
          },
          "401": {
            "description": "Richiesta non autorizzata"
          }
        }
      }
    },
    "/incassi/{idDominio}": {
      "post": {
        "tags": [
          "Incassi"
        ],
        "summary": "Registra un incasso",
        "description": "Il servizio permette la riconciliazione degli incassi ricevuti dalla Banca Tesoriera con i pagamenti eseguiti dalla piattaforma PagoPA.",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "body",
            "name": "incasso",
            "description": "Incasso da registrare sulla piattaforma",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Incasso"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Richiesta di incasso giÃƒ  registrata con successo",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/Incasso"
                },
                {
                  "properties": {
                    "riferimento_rendicontazone": {
                      "type": "string",
                      "description": "Identificativo flusso o versamento individuato nella causale"
                    },
                    "pagamenti": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/PagamentoBreve"
                      }
                    }
                  }
                }
              ]
            }
          },
          "201": {
            "description": "Incasso registrato con successo",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/Incasso"
                },
                {
                  "properties": {
                    "riferimento_rendicontazone": {
                      "type": "string",
                      "description": "Identificativo flusso o versamento individuato nella causale"
                    },
                    "pagamenti": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/PagamentoBreve"
                      }
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "Non autenticato"
          },
          "422": {
            "description": "Richiesta non processabile"
          },
          "500": {
            "description": "Errore interno"
          }
        }
      },
      "get": {
        "tags": [
          "Incassi"
        ],
        "summary": "Lista degli incassi registrati per un beneficiario",
        "description": "Mostra la lista degli incassi registrati con successo per un beneficiario.",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "query",
            "name": "data_inizio",
            "description": "Filtra gli incassi registrati precedentemente la data espressa in millisecondi dall'epoch",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "in": "query",
            "name": "data_fine",
            "description": "Filtra gli incassi registrati successivamente la data espressa in millisecondi dall'epoch",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "in": "query",
            "name": "offset",
            "description": "Numero di risultati da omettere nella risposta",
            "required": false,
            "type": "integer",
            "default": 0
          },
          {
            "in": "query",
            "name": "limit",
            "description": "Numero massimo di risultati nella risposta",
            "required": false,
            "type": "integer",
            "default": 25,
            "maximum": 500
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/Incasso"
            }
          },
          "401": {
            "description": "Non autenticato"
          },
          "404": {
            "description": "Incasso non registrato"
          },
          "500": {
            "description": "Errore interno"
          }
        }
      }
    },
    "/incassi/{idDominio}/{trn}": {
      "get": {
        "tags": [
          "Incassi"
        ],
        "summary": "Legge un incasso",
        "description": "L'operazione ritorna le informazioni generali dell'incasso identificato dal TRN fornito, comprensivo della lista dei pagamenti incassati.",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "path",
            "name": "trn",
            "description": "Identificativo dell'operazione di riversamento alla Banca Tesoriera",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/Incasso"
                },
                {
                  "properties": {
                    "riferimento_rendicontazone": {
                      "type": "string",
                      "description": "Identificativo flusso o versamento individuato nella causale"
                    },
                    "pagamenti": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/Pagamento"
                      }
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "Non autenticato"
          },
          "404": {
            "description": "Incasso non registrato"
          },
          "500": {
            "description": "Errore interno"
          }
        }
      },
      "delete": {
        "tags": [
          "Incassi"
        ],
        "summary": "De-registra un incasso",
        "parameters": [
          {
            "in": "path",
            "name": "idDominio",
            "type": "string",
            "required": true,
            "description": "Codice fiscale del beneficiario"
          },
          {
            "in": "path",
            "name": "trn",
            "description": "Identificativo dell'operazione di riversamento alla Banca Tesoriera",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Non autenticato"
          },
          "404": {
            "description": "Incasso non registrato"
          }
        }
      }
    }
  },
  "definitions": {
  	"Dominio": {
  		"type": "object",
  		"properties": {
		  "id_dominio": {
		    "type": "string",
		    "description": "Codice fiscale del beneficiario",
		    "example": "01234567890"
		  },
		  "ragione_sociale": {
		    "type": "string",
		    "description": "Ragione sociale del beneficiario",
		    "example": "Ente Creditore"
		  },
		  "abilitato": {
		    "type": "boolean",
		    "description": "Indicazione se il creditore e' abilitato ad operare sulla piattaforma",
		    "example": "true"
		  },
		  "url": {
		    "type": "string",
		    "description": "URL per l'acquisizione completa dei dati del beneficiario",
		    "example": "http://localhost:8080/govpay/rs/v1/domini/01234567890"
		  }
		}
  	},
  
    "AnagraficaBreve": {
      "type": "object",
      "properties": {
        "identificativoUnivoco": {
          "type": "string",
          "description": "Identificativo del soggetto",
          "example": "RSSMRA85T10A562S"
        },
        "tipoIdentificativoUnivoco": {
          "type": "string",
          "enum": [
            "F",
            "G"
          ],
          "example": "F",
          "default": "F"
        },
        "anagrafica": {
          "type": "string",
          "description": "Nominativo o ragione sociale del soggetto",
          "example": "Rossi Mario"
        }
      },
      "required": [
        "identificativoUnivoco",
        "anagrafica",
        "tipoIdentificativoUnivoco"
      ]
    },
    "Anagrafica": {
      "allOf": [
        {
          "$ref": "#/definitions/AnagraficaBreve"
        },
        {
          "type": "object",
          "properties": {
            "indirizzo": {
              "type": "string",
              "example": "Piazza della Vittoria"
            },
            "civico": {
              "type": "string",
              "example": "1A"
            },
            "cap": {
              "type": "string",
              "example": "00000"
            },
            "localita": {
              "type": "string",
              "example": "Frascati"
            },
            "provincia": {
              "type": "string",
              "example": "Roma"
            },
            "nazione": {
              "type": "string",
              "example": "IT"
            },
            "email": {
              "type": "string",
              "example": "mario.rossi@mail.it"
            }
          }
        }
      ]
    },
    "Versamento": {
      "type": "object",
      "required": [
        "pagatore",
        "importo",
        "descrizione",
        "tassonomia",
        "ibanAccredito",
        "tipoContabilita",
        "codiceContabilita",
        "scadenzaPagamento",
        "scadenzaAvviso"
      ],
      "properties": {
        "idUnitaOperativa": {
          "type": "string",
          "description": "Codice fiscale dell'unitÃ  operativa beneficiaria",
          "example": "0987654321"
        },
        "pagatore": {
          "$ref": "#/definitions/Anagrafica"
        },
        "importo": {
          "type": "number",
          "description": "Importo della somma da versare",
          "example": "100.99"
        },
        "descrizione": {
          "type": "string",
          "description": "Descrizione della causale del versamento",
          "example": "Sanzione CdS verbale n. 1234567890"
        },
        "tassonomia": {
          "type": "string",
          "description": "Categoria di appartenenza del versamento",
          "example": "Sanzioni"
        },
        "ibanAccredito": {
          "type": "string",
          "description": "Conto di accredito dell'importo versato",
          "example": "IT88T1927501600001011018002"
        },
        "tipoContabilita": {
          "type": "string",
          "description": "Tipologia di codifica della contabilitÃ  \n- 0: Capitolo e articolo di Entrata del Bilancio dello Stato\n- 1: Numero della contabilitÃ  speciale\n- 2: Codice SIOPE\n- 9: Altro codice ad uso dell'Ente beneficiario\n",
          "example": 2,
          "enum": [
            0,
            1,
            2,
            9
          ]
        },
        "codiceContabilita": {
          "type": "string",
          "description": "Codice di contabilitÃ  nella tipologia scelta",
          "example": 1234
        },
        "scadenzaPagamento": {
          "type": "string",
          "description": "Data di scadenza del pagamento, decorsa la quale l'importo puÃ² variare",
          "example": "31/12/2018"
        },
        "scadenzaAvviso": {
          "type": "string",
          "description": "Data di scadenza dell'Avviso, decorsa la quale il pagamento non puÃ² essere realizzato",
          "example": "31/12/2018"
        }
      }
    },
    "VersamentoStrutturato": {
      "type": "object",
      "required": [
        "idDominio",
        "pagatore",
        "descrizione",
        "vociPagamento"
      ],
      "properties": {
        "idDominio": {
          "type": "string",
          "description": "Codice fiscale del beneficiario"
        },
        "idUnitaOperativa": {
          "type": "string",
          "description": "Codice fiscale dell'unitÃ  operativa beneficiaria",
          "example": "0987654321"
        },
        "pagatore": {
          "$ref": "#/definitions/Anagrafica"
        },
        "descrizione": {
          "type": "string",
          "description": "aaa",
          "example": "Iscrizione matricola 9999999"
        },
        "vociPagamento": {
          "type": "array",
          "minItems": 1,
          "maxItems": 5,
          "items": {
            "type": "object",
            "properties": {
              "importo": {
                "type": "number",
                "description": "Importo della somma da versare",
                "example": "100.99"
              },
              "descrizione": {
                "type": "string",
                "description": "Descrizione della causale dela voce di pagamento",
                "example": "Sanzione CdS verbale n. 1234567890"
              },
              "ibanAccredito": {
                "type": "string",
                "description": "Conto di accredito della voce di pagamento",
                "example": "IT88T1927501600001011018002"
              },
              "tipoContabilita": {
                "type": "string",
                "description": "Tipologia di codifica della contabilitÃ  \n- 0: Capitolo e articolo di Entrata del Bilancio dello Stato\n- 1: Numero della contabilitÃ  speciale\n- 2: Codice SIOPE\n- 9: Altro codice ad uso dell'Ente beneficiario\n",
                "example": 2,
                "enum": [
                  0,
                  1,
                  2,
                  9
                ]
              },
              "codiceContabilita": {
                "type": "string",
                "description": "Codice di contabilitÃ  nella tipologia scelta",
                "example": 1234
              }
            }
          }
        }
      }
    },
    "PagamentoInAttesaBreve": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "URL dove reperire il pagamento in attesa completo",
          "example": "http://localhost:8080/govpay/rs/v1//versamenti/01234567890/123456789012345"
        },
        "idDominio": {
          "type": "string",
          "description": "Codice fiscale del beneficiario",
          "example": "01234567890"
        },
        "iuv": {
          "type": "string",
          "description": "Identificativo Univoco Versamento assegnato",
          "example": "123456789012345"
        },
        "numeroAvviso": {
          "type": "string",
          "format": "Numero dell'avviso emesso",
          "example": "001123456789012345"
        },
        "stato": {
          "type": "string",
          "description": "Stato di pagamento del versamento",
          "enum": [
            "NON ESEGUITO",
            "ESEGUITO",
            "ANNULLATO",
            "SCADUTO"
          ],
          "example": "NON ESEGUITO"
        },
        "importo": {
          "type": "number",
          "description": "Importo della somma da versare",
          "example": 100.99
        },
        "descrizione": {
          "type": "string",
          "description": "Descrizione della causale del versamento",
          "example": "Sanzione CdS verbale n. 1234567890"
        },
        "tassonomia": {
          "type": "string",
          "description": "Categoria di appartenenza del versamento",
          "example": "Sanzioni"
        }
      }
    },
    "PagamentoInAttesa": {
      "allOf": [
        {
          "$ref": "#/definitions/PagamentoInAttesaBreve"
        },
        {
          "$ref": "#/definitions/Versamento"
        },
        {
          "type": "object",
          "properties": {
            "pdfAvviso": {
              "type": "string",
              "description": "URL dove reperire la stampa dell'avviso",
              "example": "http://localhost:8080/govpay/rs/v1//versamenti/01234567890/123456789012345/avviso"
            }
          }
        }
      ]
    },
    "RptBreve": {
      "type": "object",
      "properties": {
        "idDominio": {
          "type": "string",
          "description": "Codice fiscale del beneficiario",
          "example": "01234567890"
        },
        "iuv": {
          "type": "string",
          "description": "Identificativo Univoco Versamento",
          "example": "123456789012345"
        },
        "ccp": {
          "type": "string",
          "description": "Identificativo Contesto di Pagamento",
          "example": "ABC1234"
        },
        "dataEsecuzione": {
          "type": "string",
          "description": "Data di esecuzione del pagamento",
          "example": "31/12/2016"
        },
        "esito": {
          "type": "string",
          "description": "Esito del pagamento\n- 0: Pagamento eseguito\n- 1: Pagamento non eseguito\n- 2: Pagamento parzialmente eseguito\n- 3: Decorrenza termini\n- 4: Decorrenza termini parziale\n",
          "example": 0,
          "enum": [
            0,
            1,
            2,
            3,
            4
          ]
        },
        "psp": {
          "type": "string",
          "description": "URL dove reperire informazioni sul canale utilizzato per il pagamento",
          "example": "http://localhost:8080/govpay/rs/v1//psp/idPsp1"
        }
      }
    },
    "Rpt": {
      "allOf": [
        {
          "$ref": "#/definitions/RptBreve"
        },
        {
          "type": "object",
          "properties": {
            "versante": {
              "$ref": "#/definitions/Anagrafica"
            },
            "tipoVersamento": {
              "type": "string",
              "description": "Tipologia di versamento\n- BBT: Bonifico Bancario di Tesoreria\n- BP: Bollettino Postale\n- AD: Addebito diretto\n- CP: Carta di Pagamento\n- PO: Pagamento attivato presso PSP\n- OBEP: On-line bancking e-payment\n- OTH: Altro canale di pagamento\n",
              "example": "CP",
              "enum": [
                "BBT",
                "BP",
                "AD",
                "CP",
                "PO",
                "OBEP",
                "OTH"
              ]
            },
            "rpt": {
              "type": "string",
              "description": "URL dove reperire la richiesta di pagamento",
              "example": "http://localhost:8080/govpay/rs/v1//rpts/01234567890/123456789012345/12345/rpt"
            },
            "rt": {
              "type": "string",
              "description": "URL dove reperire la ricevuta di pagamento",
              "example": "http://localhost:8080/govpay/rs/v1//rpts/01234567890/123456789012345/12345/rt"
            },
            "pagamenti": {
              "type": "string",
              "description": "URL dove reperire l'elenco dei pagamenti perfezionati",
              "example": "http://localhost:8080/govpay/rs/v1//pagamenti/01234567890/123456789012345/12345"
            }
          }
        }
      ]
    },
    "SceltaWisp": {
      "type": "object",
      "properties": {
        "idDominio": {
          "type": "string",
          "description": "Codice fiscale del beneficiario",
          "example": "01234567890"
        },
        "keyPa": {
          "type": "string",
          "description": "Token di scelta WISP assegnato dal beneficiario",
          "example": "01234567890"
        },
        "keyWisp": {
          "type": "string",
          "description": "Token di scelta WISP assegnato dal wisp",
          "example": "01234567890"
        }
      }
    },
    "PagamentoBreve": {
      "type": "object",
      "properties": {
        "idDominio": {
          "type": "string",
          "description": "Codice fiscale del beneficiario",
          "example": "01234567890"
        },
        "iuv": {
          "type": "string",
          "description": "Identificativo Univoco Versamento",
          "example": "123456789012345"
        },
        "iur": {
          "type": "string",
          "description": "Identificativo Univoco Riversamento",
          "example": "ABC1234"
        },
        "dataPagamento": {
          "type": "string",
          "description": "Data di esecuzione del pagamento",
          "example": "31/12/2016"
        },
        "importo": {
          "type": "number",
          "description": "Importo della somma versata",
          "example": 100.99
        },
        "stato": {
          "type": "string",
          "enum": [
            "Non incassato",
            "Incassato"
          ],
          "default": [
            "Non incassato"
          ],
          "example": [
            "Non incassato"
          ]
        },
        "incasso": {
          "type": "string",
          "description": "URL dove reperire le informazioni di incasso",
          "example": "http://localhost:8080/govpay/rs/v1//incassi/01234567890/123456789012345/ABC1234"
        }
      }
    },
    "Pagamento": {
      "allOf": [
        {
          "$ref": "#/definitions/PagamentoBreve"
        },
        {
          "type": "object",
          "properties": {
            "tipoVersamento": {
              "type": "string",
              "description": "Tipologia di versamento\n- BBT: Bonifico Bancario di Tesoreria\n- BP: Bollettino Postale\n- AD: Addebito diretto\n- CP: Carta di Pagamento\n- PO: Pagamento attivato presso PSP\n- OBEP: On-line bancking e-payment\n- OTH: Altro canale di pagamento\n",
              "example": "CP",
              "enum": [
                "BBT",
                "BP",
                "AD",
                "CP",
                "PO",
                "OBEP",
                "OTH"
              ]
            },
            "rpt": {
              "type": "string",
              "description": "URL dove reperire la richiesta di pagamento",
              "example": "http://localhost:8080/govpay/rs/v1//rpts/01234567890/123456789012345/12345"
            },
            "quietanza": {
              "type": "string",
              "description": "URL dove reperire la stampa della quietanza di pagamento",
              "example": "http://localhost:8080/govpay/rs/v1//pagamenti/01234567890/123456789012345/12345/quietanza"
            }
          }
        }
      ]
    },
    "Incasso": {
      "type": "object",
      "required": [
        "trn",
        "causale",
        "importo"
      ],
      "properties": {
        "trn": {
          "type": "string",
          "description": "Identificativo dell'operazione di riversamento fondi alla Banca Tesoriera.",
          "pattern": "[^ ]{1,35}",
          "example": "12345678901234567890123456789012345"
        },
        "causale": {
          "type": "string",
          "description": "Causale dell'operazione di riversamento dal PSP alla Banca Tesoriera",
          "example": "/PUR/LGPE-RIVERSAMENTO/URI/2017-01-01ABI00000011234"
        },
        "importo": {
          "type": "number",
          "format": "double",
          "example": 100.01
        },
        "data_valuta": {
          "description": "Data valuta espressa in millisecondi dall'epoch",
          "type": "integer",
          "format": "int64",
          "example": "1494885600000"
        },
        "data_contabile": {
          "description": "Data dell'operazione contabile espressa in millisecondi dall'epoch",
          "type": "integer",
          "format": "int64",
          "example": "1494885600000"
        },
        "dispositivo": {
          "type": "string",
          "description": "Identificativo del tracciato contenente l'incasso",
          "example": "20001231000000000001"
        }
      }
    }
  }
}
